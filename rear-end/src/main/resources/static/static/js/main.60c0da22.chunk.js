(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{14:function(t,e,n){},281:function(t,e,n){"use strict";n.r(e);var a=n(7),s=n.n(a),r=n(28),i=n.n(r),c=(n(38),n(29)),d=n(30),o=n(33),u=n(32),l=(n.p,n(14),n(31)),h=n(4),p=n.n(h),f=n(2),g=function(t){Object(o.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={domain:"",corpId:"",authCode:"",userId:"",userName:"",groupId:"",title:"\u6545\u969c\u7ef4\u4fee",topCardId:"",imCardId:"",msg:"\u4e00\u53f7\u673a\u623f\u53d1\u751f\u6545\u969c\uff0c\u4e0d\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u5c3d\u5feb\u7ef4\u4fee\u5904\u7406!!!"},a}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return""===this.state.corpId&&this.getCorpId(),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("h2",{children:"\u6545\u969c\u5904\u7406"}),Object(f.jsx)("p",{children:Object(f.jsx)("small",{children:"\u7f6e\u9876\u529f\u80fdpc\u7aef\u65e0\u6cd5\u67e5\u770b\u65f6\uff0c\u8bf7\u5728\u624b\u673a\u7aef\u67e5\u770b"})}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return t.create()},children:"\u53d1\u751f\u6545\u969c\u81ea\u52a8\u5efa\u7fa4"})}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return t.sendIm()},children:"\u63a8\u9001\u6545\u969c\u6d88\u606f\uff08IM\u5361\u7247\uff09"})}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{type:"button",onClick:function(e){return t.updateMsg(e,t.state.imCardId)},children:"\u66f4\u65b0\u6d88\u606f"})}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return t.sendMsg()},children:"\u6545\u969c\u6d88\u606f\u7fa4\u7f6e\u9876\uff08\u7f6e\u9876\u5361\u7247\uff09"})}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{type:"button",onClick:function(e){return t.updateMsg(e,t.state.topCardId)},children:"\u66f4\u65b0\u7f6e\u9876\u6d88\u606f\uff08\u7f6e\u9876\u5361\u7247\uff09"})}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return t.complete()},children:"\u6545\u969c\u4fee\u590d\u53d6\u6d88\u7f6e\u9876"})})]})}},{key:"updateMsg",value:function(t,e){p.a.post(this.state.domain+"/sceneGroup/updateMsg?msg=\u6d88\u606f\u66f4\u65b0\u2014\u2014\u6545\u969c\u4fee\u590d&cardId="+e).then((function(t){t&&t.data.success?t.data.data?alert("\u66f4\u65b0\u6210\u529f\uff01"):alert("\u66f4\u65b0\u5931\u8d25\uff01"):alert("updateMsg failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("updateMsg err, ",JSON.stringify(t))}))}},{key:"sendIm",value:function(){var t=this;p.a.post(this.state.domain+"/sceneGroup/sendIm?groupId="+this.state.groupId+"&msg="+this.state.msg).then((function(e){e&&e.data.success?e.data.data?(t.setState({imCardId:e.data.data}),alert("\u53d1\u9001\u6210\u529f\uff01")):alert("\u53d1\u9001\u5931\u8d25\uff01"):alert("sendIm failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("sendIm err, ",JSON.stringify(t))}))}},{key:"complete",value:function(){p.a.post(this.state.domain+"/sceneGroup/complete?groupId="+this.state.groupId+"&topCardId="+this.state.topCardId).then((function(t){t&&t.data.success?alert("\u6545\u969c\u4fee\u590d\u5b8c\u6210\uff01"):alert("complete failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("complete err, ",JSON.stringify(t))}))}},{key:"sendMsg",value:function(){var t=this;p.a.post(this.state.domain+"/sceneGroup/sendMsg?groupId="+this.state.groupId+"&msg="+this.state.msg).then((function(e){if(e&&e.data.success){var n=e.data.data;alert("\u5f00\u542f\u7f6e\u9876\u6d88\u606f\u6210\u529f\uff01\uff01\uff01"),t.setState({topCardId:n})}else alert("sendMsg failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("sendMsg err, ",JSON.stringify(t))}))}},{key:"create",value:function(){var t=this;p.a.post(this.state.domain+"/sceneGroup/create?userId="+this.state.userId+"&title="+this.state.title).then((function(e){if(e&&e.data.success){var n=e.data.data;alert("\u5efa\u7fa4\u6210\u529f\uff01\uff01\uff01"),t.setState({groupId:n})}else alert("create failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("create err, ",JSON.stringify(t))}))}},{key:"getCorpId",value:function(){var t=this;p.a.get(this.state.domain+"/getCorpId").then((function(e){e.data&&t.login(e.data)})).catch((function(t){alert("corpId err, ",JSON.stringify(t))}))}},{key:"login",value:function(t){alert("corpId: "+t);var e=this;l.runtime.permission.requestAuthCode({corpId:t,onSuccess:function(t){e.state.authCode=t.code,p.a.get(e.state.domain+"/login?authCode="+e.state.authCode).then((function(t){if(t&&t.data.success){var n=t.data.data.userId,a=t.data.data.userName;alert("\u767b\u5f55\u6210\u529f\uff0c\u4f60\u597d"+a),e.setState({userId:n,userName:a})}else alert("login failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("httpRequest failed ---\x3e"+JSON.stringify(t))}))},onFail:function(t){alert("requestAuthCode failed ---\x3e"+JSON.stringify(t))}})}}]),n}(s.a.Component),j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),s(t),r(t),i(t)}))};i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),j()},38:function(t,e,n){}},[[281,1,2]]]);
//# sourceMappingURL=main.60c0da22.chunk.js.map